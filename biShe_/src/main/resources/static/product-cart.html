<!DOCTYPE html>
<html class="no-js" lang="zxx" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Brancy - Cosmetic & Beauty Salon Website Template</title>
    <meta name="description" content="Brancy - Cosmetic & Beauty Salon Website Template">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="keywords" content="bootstrap, ecommerce, ecommerce html, beauty, cosmetic shop, beauty products, cosmetic, beauty shop, cosmetic store, shop, beauty store, spa, cosmetic, cosmetics, beauty salon">

    <!-- Font CSS -->
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link href="./css/css2.css" rel="stylesheet">

    <!-- Vendor CSS (Bootstrap & Icon Font) -->
    <link rel="stylesheet" href="./css/bootstrap.min.css">

    <!-- Plugins CSS (All Plugins Files) -->
    <link rel="stylesheet" href="./css/swiper-bundle.min.css">
    <link rel="stylesheet" href="./css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/fancybox.min.css">
    <link rel="stylesheet" href="./css/nice-select.css">
    <link href="./css/css2.css" rel="stylesheet">

    <!-- Style CSS -->
    <link rel="stylesheet" href="./css/style.min.css">

</head>

<body>

<!--== Wrapper Start ==-->
<div class="wrapper" id="app">

    <!--== Start Header Wrapper ==-->
    <header class="header-area sticky-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-5 col-sm-6 col-lg-3">
                    <div class="header-logo">
                        <a href="index.html">
                            <img class="logo-main" src="./picture/logo.webp" width="95" height="68" alt="Logo">
                        </a>
                    </div>
                </div>
                <div class="col-lg-6 d-none d-lg-block">
                    <div class="header-navigation">
                        <ul class="main-nav justify-content-start">
                            <li class="has-submenu"><a href="http://localhost:8333">主页</a></li>
                            <!--                            <li><a href="about-us.html">关于</a></li>-->
                            <li class="has-submenu position-static"><a href="http://localhost:8333/product.html">购物</a>
                                <ul class="submenu-nav-mega">
                                    <li><a href="#/" class="mega-title">购物布局</a>
                                        <ul>
                                            <li><a href="product.html">商品 3 列</a></li>
                                            <li><a href="product-four-columns.html">商品 4 列</a></li>
                                            <li><a href="product-left-sidebar.html">商品左侧边栏</a></li>
                                            <li><a href="product-right-sidebar.html">商品右侧边栏</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="#/" class="mega-title">单一产品</a>
                                        <ul>
                                            <li><a href="product-details-normal.html">单一产品-正常</a></li>
                                            <li><a href="product-details.html">单一产品-变量</a></li>
                                            <li><a href="product-details-group.html">单一产品-分组</a></li>
                                            <li><a href="product-details-affiliate.html">单一产品-关联</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="#/" class="mega-title">其它页面</a>
                                        <ul>
                                            <li><a href="product-cart.html">购物车</a></li>
                                            <li><a href="product-checkout.html">结算</a></li>
                                            <li><a href="product-wishlist.html">愿望清单</a></li>
                                            <li><a href="product-compare.html">商品比较</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="has-submenu"><a href="blog.html">博客</a>
                                <ul class="submenu-nav">
                                    <li class="has-submenu"><a href="#/">博客布局</a>
                                        <ul class="submenu-nav">
                                            <li><a href="blog.html">博客网格</a></li>
                                            <li><a href="blog-left-sidebar.html">博客左侧边栏</a></li>
                                            <li><a href="blog-right-sidebar.html">博客右侧边栏</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="blog-details.html">博客详情</a></li>
                                </ul>
                            </li>
                            <!--                            <li class="has-submenu"><a href="account-login.html">其它</a>-->
                            <!--                                <ul class="submenu-nav">-->
                            <!--                                    <li><a href="account-login.html">我的账户</a></li>-->
                            <!--                                    <li><a href="faq.html">常见问题</a></li>-->
                            <!--                                    <li><a href="page-not-found.html">页面未找到</a></li>-->
                            <!--                                </ul>-->
                            <!--                            </li>-->
                            <li><a href="contact.html">联系</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-7 col-sm-6 col-lg-3">

                    <div class="header-action justify-content-end">

                        <div v-if="!userInfo">
                            <span style="margin-right: 20px;" >未登录</span>
                        </div>
                        <div v-if="userInfo!=null">
                            <span style="margin-right: 20px;" >您好,{{userInfo.utel}},欢迎回来</span>
                        </div>


                        <button class="header-action-btn ms-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#AsideOffcanvasSearch" aria-controls="AsideOffcanvasSearch">
                                <span class="icon">
                                  <svg width="30" height="30" viewbox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <rect class="icon-rect" width="30" height="30" fill="url(#pattern1)"></rect>
                                    <defs>
                                      <pattern id="pattern1" patterncontentunits="objectBoundingBox" width="1" height="1">
                                        <use xlink:href="#image0_504:11" transform="scale(0.0333333)"></use>
                                      </pattern>
                                      <image id="image0_504:11" width="30" height="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAABiUlEQVRIie2Wu04CQRSGP0G2EUtIbHwA8B3EQisLIcorEInx8hbEZ9DKy6toDI1oAgalNFpDoYWuxZzJjoTbmSXERP7kZDbZ859vdmb27MJcf0gBUAaugRbQk2gBV3IvmDa0BLwA4Zh4BorTACaAU6fwPXAI5IAliTxwBDScvJp4vWWhH0BlTLEEsC+5Fu6lkgNdV/gKDnxHCw2I9rSiNQNV8baBlMZYJtpTn71KAg9SY3dUYn9xezLPgG8P8BdwLteq5X7CzDbnAbXKS42WxtQVUzoGeFlqdEclxXrnhmhhkqR+8KuMqzHA1vumAddl3IwB3pLxVmOyr1NjwKQmURJ4lBp7GmOAafghpg1qdSDeDrCoNReJWmZB4dsAPsW7rYVa1Rx4FbOEw5TEPKmFvgMZX3DCgYeYNniMaQ5piTXghGhPLdTmZ33hYNpem98f/UHRwSxvhqhXx4anMA3/EmhiOlJPJnSBOb3uQcpOE65VhujPpAms/Bu4u+x3swRbeB24mTV4LgB+AFuLedkPkcmmAAAAAElFTkSuQmCC"></image>
                                    </defs>
                                  </svg>
                                </span>
                        </button>

                        <a @click="comeToCart">
                            <button class="header-action-btn" type="button" data-bs-toggle="offcanvas">
                                <span class="icon">
                                  <svg width="30" height="30" viewbox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <rect class="icon-rect" width="30" height="30" fill="url(#pattern2)"></rect>
                                    <defs>
                                      <pattern id="pattern2" patterncontentunits="objectBoundingBox" width="1" height="1">
                                        <use xlink:href="#image0_504:9" transform="scale(0.0333333)"></use>
                                      </pattern>
                                      <image id="image0_504:9" width="30" height="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAABFUlEQVRIie2VMU7DMBSGvwAqawaYuAmKxCW4A1I5Qg4AA93KBbp1ZUVUlQJSVVbCDVhgzcTQdLEVx7WDQ2xLRfzSvzzb+d6zn2MYrkugBBYevuWsHKiFn2JBMwH8Bq6Aw1jgBwHOYwGlPgT4LDZ4I8BJDNiEppl034UEJ8DMAJ0DByHBACPgUYEugePQUKkUWAmnsaB/Ry/YO9aXCwlT72AdrqaWEohwBWxSwc8ReIVtYIr5bM5pXqO+Men7rozGlkVSv4lJj1WQfsbvXVkNVNk1eEK4ik9/yuwzAPhLh5iuU4jtftMDR4ZJJXChxTJ2H3zXGDgWc43/X2Wro8G81a8u2fXU2nXiLVAxvNIKuPGW/r/2SltF+a3Rkw4pmwAAAABJRU5ErkJggg=="></image>
                                    </defs>
                                  </svg>
                                </span>
                            </button>


                        </a>

                        <!--                        <input type="hidden" id="user" th:value="${user?.uid}">-->
                        <!--                        <a class="header-action-btn" th:onclick="javascript:test('+${session.uid}')">-->
                        <a class="header-action-btn" @click="onself">
                                <span class="icon">
                                  <svg width="30" height="30" viewbox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <rect class="icon-rect" width="30" height="30" fill="url(#pattern3)"></rect>
                                    <defs>
                                      <pattern id="pattern3" patterncontentunits="objectBoundingBox" width="1" height="1">
                                        <use xlink:href="#image0_504:10" transform="scale(0.0333333)"></use>
                                      </pattern>
                                      <image id="image0_504:10" width="30" height="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAABEUlEQVRIie3UMUoDYRDF8Z8psqUpLBRrBS+gx7ATD6E5iSjeQQ/gJUzEwmChnZZaKZiQ0ljsLkhQM5/5Agr74DX7DfOfgZ1Hoz+qAl30Marcx2H1thCtY4DJN76parKqmAH9DM+6eTcArX2QE3yVAO7lBA8TwMNIw6UgeJI46My+rWCjUQL0LVIUBd8lgEO1UfBZAvg8oXamCuWNRu64nRNMmUo/wReSXLXayoDoKc9miMvqW/ZNG2VRNLla2MYudrCFTvX2intlnl/gGu/zDraGYzyLZ/UTjrD6G2AHpxgnAKc9xgmWo9BNPM4BnPYDNiLg24zQ2oNpyFdZvRKZLlGhnvvKPzXXti/Yy7hEo3+iD9EHtgdqxQnwAAAAAElFTkSuQmCC"></image>
                                    </defs>
                                  </svg>
                                </span>
                        </a>

                        <button class="header-menu-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#AsideOffcanvasMenu" aria-controls="AsideOffcanvasMenu">
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!--== End Header Wrapper ==-->

    <main class="main-content">

        <!--== Start Page Header Area Wrapper ==-->
        <nav aria-label="breadcrumb" class="breadcrumb-style1">
            <div class="container">
                <ol class="breadcrumb justify-content-center">
                    <li class="breadcrumb-item"><a href="http://localhost:8333/">主页</a></li>
                    <li class="breadcrumb-item active" aria-current="page">购物车</li>
                </ol>
            </div>
        </nav>
        <!--== End Page Header Area Wrapper ==-->

        <!--== Start Product Area Wrapper ==-->
        <section class="section-space">
            <div class="container">
                <div class="shopping-cart-form table-responsive">
                    <form action="#" method="post">
                        <table class="table text-center">
                            <thead>
                            <tr>
                                <th class="product-remove">&nbsp;</th>
                                <th class="product-thumbnail">&nbsp;</th>
                                <th class="product-name">商品</th>
                                <th class="product-price">单价</th>
                                <th class="product-quantity">数量</th>
                                <th class="product-subtotal">总金额</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr class="tbody-item" v-for="(p,index) in cartInfoT">
                                <td class="product-remove">
                                    <a class="remove" @click="deleteProductFromCart(p.cartid)">×</a>
                                </td>
                                <td class="product-thumbnail">
                                    <div class="thumb">
                                        <a @click="getDetail(p.pid)">
                                            <img :src="getProductImage(p.cartimage)" style=" width:68px; height:84px "  alt="Image-HasTech">
                                        </a>
                                    </div>
                                </td>
                                <td class="product-name">
                                    <a class="title" href="javascript:;" >{{p.pname}}</a>
                                </td>
                                <td class="product-price">
                                    <span class="price">{{p.cartoneprice}}</span>
                                </td>
                                <td class="product-quantity">
                                    <a class="remove" @click="reduceProductCartCount(p.cartid,p.cartcount)">-</a>
                                    <input type="text" class="quantity" name="quantity" title="Quantity" v-model="p.cartcount">
                                    <a class="remove" @click="addProductCartCount(p.cartid)">+</a>
   <!--                                            </div>-->
                                </td>
                                <td class="product-subtotal">
                                    <span class="price">{{p.cartallprice}}</span>
                                </td>
                            </tr>

                            <tr class="tbody-item-actions">
                                <td colspan="6">
 <!--               <button type="submit" class="btn-update-cart disabled" disabled="" th:action="@{/all}">更新购物车</button>-->
                                </td>
                            </tr>
                            </tbody>

                        </table>
                    </form>
                </div>

                <div class="row">
<!--                    <div class="col-12 col-lg-6">-->
<!--                        <div class="coupon-wrap">-->
<!--                            <h4 class="title">优惠券</h4>-->
<!--                            <p class="desc">如果您有优惠券代码，请输入您的优惠券代码。</p>-->
<!--                            <input type="text" class="form-control" placeholder="优惠券代码">-->
<!--                            <button type="button" class="btn-coupon">使用优惠券</button>-->
<!--                        </div>-->
<!--                    </div>-->
                    <div class="col-12 col-lg-6">
                        <div class="cart-totals-wrap">

                            <h2 class="title">购物车总计</h2>
                            <table>
                                <tbody>
                                <tr class="cart-subtotal">
                                    <th>小结</th>
                                    <td>
                                        <span class="amount">￥{{total}}</span>

                                    </td>
                                </tr>
                                <tr class="shipping-totals" >
                                    <th>运输</th>
                                    <td>
                                        <ul class="shipping-list">
                                            <li class="radio">
<!--                                                <input type="radio" name="shipping" id="radio1" onclick="acheck1()">-->
<!--                                                <label for="radio1">统一运费： <span>$16.00</span></label>-->
 <!--                                                        <a class="remove" th:onclick="'deleteCart('+${carts.id}+')'">×</a>-->
                                            </li>
                                            <li class="radio">
                                                <input type="radio" name="shipping" id="radio2" onclick="acheck2()">
                                                <label for="radio2">免运费</label>
                                            </li>
                                            <li class="radio">
<!--                                                <input type="radio" name="shipping" id="radio3" onclick="acheck2()">-->
<!--                                                <label for="radio3">自提</label>-->
                                            </li>
                                            <label for="display-name" class="required">订单备注</label>
                                            <input type="text" name="uname" id="display-name" v-model="orderInfo.description">
                                        </ul>
                                        <p class="destination">装运至 <strong >{{userAddress.pname}}{{userAddress.cname}}{{userAddress.aname}} {{userAddress.addrinfo}} {{userAddress.getpeople}} {{userAddress.tel}}</strong></p>
<!--                                                <a href="javascript:void(0)" class="btn-shipping-address">修改收货地址</a>-->
                                    </td>
                                </tr>
<!--                                <tr class="order-total">-->
<!--                                    <th>总计</th>-->
<!--                                    <td>-->
                                        <!--                                                <span class="amount3"><br/></span>-->

<!--                                        <span name="totalPrice" class="amount1" >$[[${total}]]</span>-->
<!--                                        <span name="totalPrice" class="amount2" >$[[${submitprice}]]</span>-->



                                        <!--                                                <span class="amount111" th:value="${total}"></span>-->
                                        <!--                                                <span class="amount" id="amount" ></span>-->
<!--                                    </td>-->
<!--                                </tr>-->
                                </tbody>
                            </table>

                            <div class="text-end">
                                <button  class="checkout-button" @click="payOrder">去结账</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!--== End Product Area Wrapper ==-->

    </main>

    <!--== Start Footer Area Wrapper ==-->
    <footer class="footer-area">
        <!--== Start Footer Main ==-->
        <div class="footer-main">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-lg-4">
                        <div class="widget-item">
                            <div class="widget-about">
                                <a class="widget-logo" href="index.html">
                                    <img src="./picture/logo.webp" width="95" height="68" alt="Logo">
                                </a>
                                <p class="desc">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-5 mt-md-0 mt-9">
                        <div class="widget-item">
                            <h4 class="widget-title">Information</h4>
                            <ul class="widget-nav">
                                <li><a href="blog.html">Blog</a></li>
                                <li><a href="about-us.html">About us</a></li>
                                <li><a href="contact.html">Contact</a></li>
                                <li><a href="faq.html">Privacy</a></li>
                                <li><a href="account-login.html">Login</a></li>
                                <li><a href="product.html">Shop</a></li>
                                <li><a href="my-account.html">My Account</a></li>
                                <li><a href="faq.html">FAQs</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mt-lg-0 mt-6">
                        <div class="widget-item">
                            <h4 class="widget-title">Social Info</h4>
                            <div class="widget-social">
                                <a href="javascript:;" target="_blank" rel="noopener"><i class="fa fa-twitter"></i></a>
                                <a href="javascript:;" target="_blank" rel="noopener"><i class="fa fa-facebook"></i></a>
                                <a href="javascript:;" target="_blank" rel="noopener"><i class="fa fa-pinterest-p"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--== End Footer Main ==-->

        <!--== Start Footer Bottom ==-->
        <div class="footer-bottom">
            <div class="container pt-0 pb-0">
                <div class="footer-bottom-content">
                    <p class="copyright">Copyright &copy; 2022.Company name All rights reserved.<a target="_blank" href="https://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a></p>
                </div>
            </div>
        </div>
        <!--== End Footer Bottom ==-->
    </footer>
    <!--== End Footer Area Wrapper ==-->

    <!--== Scroll Top Button ==-->
    <div id="scroll-to-top" class="scroll-to-top"><span class="fa fa-angle-up"></span></div>

    <!--== Start Product Quick Wishlist Modal ==-->
    <aside class="product-action-modal modal fade" id="action-WishlistModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="product-action-view-content">
                        <button type="button" class="btn-close" data-bs-dismiss="modal">
                            <i class="fa fa-times"></i>
                        </button>
                        <div class="modal-action-messages">
                            <i class="fa fa-check-square-o"></i> Added to wishlist successfully!
                        </div>
                        <div class="modal-action-product">
                            <div class="thumb">
                                <img src="./picture/modal1.webp" alt="Organic Food Juice" width="466" height="320">
                            </div>
                            <h4 class="product-name"><a href="product-details.html">Readable content DX22</a></h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </aside>
    <!--== End Product Quick Wishlist Modal ==-->

    <!--== Start Product Quick Add Cart Modal ==-->
    <aside class="product-action-modal modal fade" id="action-CartAddModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="product-action-view-content">
                        <button type="button" class="btn-close" data-bs-dismiss="modal">
                            <i class="fa fa-times"></i>
                        </button>
                        <div class="modal-action-messages">
                            <i class="fa fa-check-square-o"></i> Added to cart successfully!
                        </div>
                        <div class="modal-action-product">
                            <div class="thumb">
                                <img src="./picture/modal1.webp" alt="Organic Food Juice" width="466" height="320">
                            </div>
                            <h4 class="product-name"><a href="product-details.html">Readable content DX22</a></h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </aside>
    <!--== End Product Quick Add Cart Modal ==-->

    <!--== Start Aside Search Form ==-->
    <aside class="aside-search-box-wrapper offcanvas offcanvas-top" tabindex="-1" id="AsideOffcanvasSearch" aria-labelledby="offcanvasTopLabel">
        <div class="offcanvas-header">
            <h5 class="d-none" id="offcanvasTopLabel">Aside Search</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"><i class="fa fa-close"></i></button>
        </div>
        <div class="offcanvas-body">
            <div class="container pt--0 pb--0">
                <div class="search-box-form-wrap">
                    <div class="search-note">
                        <p>Start typing and press Enter to search</p>
                    </div>
                    <div class="aside-search-form position-relative">
                        <label for="SearchInput" class="visually-hidden">Search</label>
                        <!--                                搜索框    -->
                        <input id="SearchInput" type="search" name="pname" class="form-control" placeholder="搜索关键字" v-model="searchName">
                        <button class="search-button" @click="getSearchName"><i class="fa fa-search"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </aside>
    <!--== End Aside Search Form ==-->

    <!--== Start Product Quick View Modal ==-->
    <aside class="product-cart-view-modal modal fade" id="action-QuickViewModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="product-quick-view-content">
                        <button type="button" class="btn-close" data-bs-dismiss="modal">
                            <span class="fa fa-close"></span>
                        </button>
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-6">
                                    <!--== Start Product Thumbnail Area ==-->
                                    <div class="product-single-thumb">
                                        <img src="./picture/quick-view1.webp" width="544" height="560" alt="Image-HasTech">
                                    </div>
                                    <!--== End Product Thumbnail Area ==-->
                                </div>
                                <div class="col-lg-6">
                                    <!--== Start Product Info Area ==-->
                                    <div class="product-details-content">
                                        <h5 class="product-details-collection">Premioum collection</h5>
                                        <h3 class="product-details-title">Offbline Instant Age Rewind Eraser.</h3>
                                        <div class="product-details-review mb-5">
                                            <div class="product-review-icon">
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-half-o"></i>
                                            </div>
                                            <button type="button" class="product-review-show">150 reviews</button>
                                        </div>
                                        <p class="mb-6">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Delectus, repellendus. Nam voluptate illo ut quia non sapiente provident alias quos laborum incidunt, earum accusamus, natus. Vero pariatur ut veniam sequi amet consectetur.</p>
                                        <div class="product-details-pro-qty">
                                            <div class="pro-qty">
                                                <input type="text" title="Quantity" value="01">
                                            </div>
                                        </div>
                                        <div class="product-details-action">
                                            <h4 class="price">￥254.22</h4>
                                            <div class="product-details-cart-wishlist">
                                                <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#action-CartAddModal">Add to cart</button>
                                            </div>
                                        </div>
                                    </div>
                                    <!--== End Product Info Area ==-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </aside>
    <!--== End Product Quick View Modal ==-->

    <!--== Start Aside Cart ==-->
    <aside class="aside-cart-wrapper offcanvas offcanvas-end" tabindex="-1" id="AsideOffcanvasCart" aria-labelledby="offcanvasRightLabel">
        <div class="offcanvas-header">
            <h1 class="d-none" id="offcanvasRightLabel">Shopping Cart</h1>
            <button class="btn-aside-cart-close" data-bs-dismiss="offcanvas" aria-label="Close">Shopping Cart <i class="fa fa-chevron-right"></i></button>
        </div>
        <div class="offcanvas-body">
            <ul class="aside-cart-product-list">
                <li class="aside-product-list-item">
                    <a href="#/" class="remove">×</a>
                    <a href="product-details.html">
                        <img src="./picture/cart1.webp" width="68" height="84" alt="Image">
                        <span class="product-title">Leather Mens Slipper</span>
                    </a>
                    <span class="product-price">1 × £69.99</span>
                </li>
                <li class="aside-product-list-item">
                    <a href="#/" class="remove">×</a>
                    <a href="product-details.html">
                        <img src="./picture/cart2.webp" width="68" height="84" alt="Image">
                        <span class="product-title">Quickiin Mens shoes</span>
                    </a>
                    <span class="product-price">1 × £20.00</span>
                </li>
            </ul>
            <p class="cart-total"><span>Subtotal:</span><span class="amount">£89.99</span></p>
            <a class="btn-total" href="">View cart</a>
            <a class="btn-total" href="product-checkout.html">Checkout</a>
        </div>
    </aside>
    <!--== End Aside Cart ==-->

    <!--== Start Aside Menu ==-->
    <aside class="off-canvas-wrapper offcanvas offcanvas-start" tabindex="-1" id="AsideOffcanvasMenu" aria-labelledby="offcanvasExampleLabel">
        <div class="offcanvas-header">
            <h1 class="d-none" id="offcanvasExampleLabel">Aside Menu</h1>
            <button class="btn-menu-close" data-bs-dismiss="offcanvas" aria-label="Close">menu <i class="fa fa-chevron-left"></i></button>
        </div>
        <div class="offcanvas-body">
            <div id="offcanvasNav" class="offcanvas-menu-nav">
                <ul>
                    <li class="offcanvas-nav-parent"><a class="offcanvas-nav-item" href="#">home</a>
                        <ul>
                            <li><a href="index.html">Home One</a></li>
                            <li><a href="index-two.html">Home Two</a></li>
                        </ul>
                    </li>
                    <li class="offcanvas-nav-parent"><a class="offcanvas-nav-item" href="about-us.html">about</a></li>
                    <li class="offcanvas-nav-parent"><a class="offcanvas-nav-item" href="#">shop</a>
                        <ul>
                            <li><a href="#" class="offcanvas-nav-item">Shop Layout</a>
                                <ul>
                                    <li><a href="product.html">Shop 3 Column</a></li>
                                    <li><a href="product-four-columns.html">Shop 4 Column</a></li>
                                    <li><a href="product-left-sidebar.html">Shop Left Sidebar</a></li>
                                    <li><a href="product-right-sidebar.html">Shop Right Sidebar</a></li>
                                </ul>
                            </li>
                            <li><a href="#" class="offcanvas-nav-item">Single Product</a>
                                <ul>
                                    <li><a href="product-details-normal.html">Single Product Normal</a></li>
                                    <li><a href="product-details.html">Single Product Variable</a></li>
                                    <li><a href="product-details-group.html">Single Product Group</a></li>
                                    <li><a href="product-details-affiliate.html">Single Product Affiliate</a></li>
                                </ul>
                            </li>
                            <li><a href="#" class="offcanvas-nav-item">Others Pages</a>
                                <ul>
                                    <li><a href="">Shopping Cart</a></li>
                                    <li><a href="product-checkout.html">Checkout</a></li>
                                    <li><a href="product-wishlist.html">Wishlist</a></li>
                                    <li><a href="product-compare.html">Compare</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li class="offcanvas-nav-parent"><a class="offcanvas-nav-item" href="#">Blog</a>
                        <ul>
                            <li><a class="offcanvas-nav-item" href="#">Blog Layout</a>
                                <ul>
                                    <li><a href="blog.html">Blog Grid</a></li>
                                    <li><a href="blog-left-sidebar.html">Blog Left Sidebar</a></li>
                                    <li><a href="blog-right-sidebar.html">Blog Right Sidebar</a></li>
                                </ul>
                            </li>
                            <li><a href="blog-details.html">Blog Details</a></li>
                        </ul>
                    </li>
                    <li class="offcanvas-nav-parent"><a class="offcanvas-nav-item" href="#">Pages</a>
                        <ul>
                            <li><a href="account-login.html">My Account</a></li>
                            <li><a href="faq.html">Frequently Questions</a></li>
                            <li><a href="page-not-found.html">Page Not Found</a></li>
                        </ul>
                    </li>
                    <li class="offcanvas-nav-parent"><a class="offcanvas-nav-item" href="contact.html">Contact</a></li>
                </ul>
            </div>
        </div>
    </aside>
    <!--== End Aside Menu ==-->

</div>

    <script src="js/vue.js"></script>
    <script src="js/axios.js"></script>
    <script src="./js/index.js"></script>
    <script src="./js/modernizr-3.11.7.min.js"></script>
    <script src="./js/jquery-3.6.0.min.js"></script>
    <script src="./js/jquery-migrate-3.3.2.min.js"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>
    <script src="./js/swiper-bundle.min.js"></script>
    <script src="./js/fancybox.min.js"></script>
    <script src="./js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.cookie.js"></script>
    <script src="./js/main.js"></script>
    <script>
        axios.defaults.baseURL = "http://localhost:8333";
        new Vue({
            el: "#app",
            data: {
                userInfo: null,    //用户信息
                searchName:'' ,   //模糊搜索
                cartInfo:{
                    uid:'',
                    pid:''
                },
                cartInfoT:{
                    uid:''
                },
                total:0,
                userAddress:{},
                orderInfo:{
                    description:'',  //订单备注
                    uid:'',
                    addressId:'',
                    oprice:'',
                    phone:'',
                    consignee:'',
                    userCartList:[],
                    addressInfo:'',
                    userName:'',
                },
                orderId:''

            },
            created() {
                this.init();
            },
            methods: {
                init() {
                    this.showInfo()     //用户信息
                    this.getUserCartInfo(); //获取用户购物车信息
                    this.getUserAddress()
                },
                showInfo() {
                    let userInfo= $.cookie("userInfo")
                    if(!userInfo) {
                        console.log('cookie不存在')
                        this.userInfo=null
                        return
                    }
                    userInfo=JSON.parse(userInfo)
                    console.log(userInfo)
                    this.userInfo = userInfo;
                },
                //跳转到购物车页面
                comeToCart() {
                    if (this.userInfo == null) {
                        window.location.href = 'account-login.html';
                    } else {
                        window.location.href = 'product-cart.html';
                    }
                },
                //获取用户购物车详情
                async getUserCartInfo() {
                    this.cartInfo.uid=this.userInfo.uid
                    // this.cartInfo.uid=29
                    let {data: result} = await axios.post("/userCart/getUserCartInfo",this.cartInfo);
                    this.cartInfoT = result.data;
                    console.log("cartInfoT",result.data)
                    this.cartInfoT.forEach((e)=>{
                        this.total += e.cartallprice
                    })
                },
                onself() {
                    if (this.userInfo == null) {
                        window.location.href = 'account-login.html';
                    } else {
                        window.location.href = 'my-account.html';
                    }
                },
                getKindImage (image) {
                    return `http://localhost:8333/common/download?name=${image}&type=kind`
                },
                getProductImage (image) {
                    if (image) {
                        return `http://localhost:8333/common/download?name=${image}`;
                    }
                },
                //查看商品详情
                getDetail(pid) {
                    window.location.href = 'product-details.html?pid='+pid;
                },
                //模糊搜索
                getSearchName() {
                    window.location.href = 'product.html?searchName='+this.searchName;
                },
                //跳转到购物车页面
                comeToCart() {
                    window.location.href = 'product-cart.html';
                },
                //从购物车移除该商品
                async deleteProductFromCart(cartid) {
                    if (window.confirm("你要从购物车中移除该商品吗？")) {
                        this.cartInfo.uid=this.userInfo.uid
                        // this.cartInfo.uid=29
                        this.cartInfo.pid=pid
                        let {data: result} = await axios.get(`/userCart/deleteByPid?pid=${cartid}`);  //userCart/deleteByPid?pid=${pid}
                        if (result.code==1) {
                            this.$message.success("已从购物车中移除")
                            this.init()
                        }
                    }
                },
                //减少数量
                async reduceProductCartCount(cartid,cartcount) {
                    if (--cartcount == 0) {
                        this.deleteProductFromCart(cartid);
                        return;
                    }
                    let {data: result} = await axios.get(`/userCart/reduceProductCartCount?cartId=${cartid}`);
                    this.cartInfoT = {};
                    let {data: a} = await axios.post("/userCart/getUserCartInfo",this.cartInfo);
                    this.cartInfoT = a.data;
                    this.total = 0;
                    this.cartInfoT.forEach((e)=>{
                        this.total += e.cartallprice
                    })
                },
                //增加数量
                async addProductCartCount(cartid) {
                    let {data: result} = await axios.get(`/userCart/addProductCartCount?cartId=${cartid}`);
                    this.cartInfoT = {};
                    let {data: a} = await axios.post("/userCart/getUserCartInfo",this.cartInfo);
                    this.cartInfoT = a.data;
                    this.total = 0;
                    this.cartInfoT.forEach((e)=>{
                        this.total += e.cartallprice
                    })
                },
                //获取用户默认地址
                async getUserAddress() {
                    var uid= this.userInfo.uid
                    let {data: result} = await axios.get(`/address/getUserAddress?uid=${uid}`);
                    this.userAddress=result.data
                },
                //支付
                async payOrder() {
                    this.orderInfo.uid=this.userInfo.uid
                    this.orderInfo.addressId=this.userAddress.addid
                    this.orderInfo.oprice=this.total
                    this.orderInfo.phone=this.userAddress.tel
                    this.orderInfo.consignee=this.userAddress.getpeople
                    this.orderInfo.userCartList=this.cartInfoT
                    this.orderInfo.userName=this.userInfo.uname
                    // {{userAddress.pname}}{{userAddress.cname}}{{userAddress.aname}} {{userAddress.addrinfo}} {{userAddress.getpeople}} {{userAddress.tel}}
                    this.orderInfo.addressInfo=''+this.userAddress.pname+this.userAddress.cname+this.userAddress.aname+this.userAddress.addrinfo
                    let {data: result} = await axios.post("/orders/addOrder",this.orderInfo);
                    if (result.code==1) {
                        this.orderId = result.data;
                        var orderId=this.orderId
                        var price=this.total
                        window.location.href = `alipay/pay?subject=购物&traceNo=${orderId}&totalAmount=${price}`;
                    }
                }

            }
        })
    </script>


















<!--<script>
    // 删除购物车商品
    function deleteCart(id){
        if (window.confirm('确定要删除该商品吗？')){
            location.href='[[@{/deleteCart?id=}]]'+id;
        }
    }

    function acheck1(){
        $(".amount2").show();
        $(".amount1").hide();
        // $(".amount3").hide();
    }
    function acheck2() {
        $(".amount1").show();
        $(".amount2").hide();
        // $(".amount3").hide();
    }

    $(function(){
        $(".amount1").hide();
        $(".amount2").hide();
        // $(".amount3").hide();
        var shipping = $('#shipping:checked').val();
        if( list == 1){
            $(".amount2").show();
        }
        if( list == 2) {
            $(".amount1").show();
        }
    })-->





</script>
</body>
</html>
